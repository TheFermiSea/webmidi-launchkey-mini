<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8" />
    <style>
      .nlk-half-key {
        display: inline-block;
        width: 12px;
        margin: 1px;
      }
      .nlk-key {
        text-align: center;
        width: 24px;
        border: 0 none;
        margin: 1px;
      }
      .nlk-white {
        background-color: #eee;
        color: #111;
      }
      .nlk-black {
        background-color: #111;
        color: #eee;
      }
    </style>
  </head>
  <body>
    Plug your Launchkey Mini, open the JavaScript console and watch it while you interact with the keyboard.
    <div id="renderedKeyboard"></div>

    <script src="webmidi-reader.js"></script>
    <script src="launchkey-state.js"></script>
    <script src="render.js"></script>

    <!--
    <script src="lib/Tone.js"></script>
    <script src="tone-generator.js"></script>
    -->
    <script src="synth-connector.js"></script>
    
    <script src="lib/riffwave.js"></script> <!-- imports RIFFWAVE -->
    <script src="lib/sfxr.js"></script> <!-- imports SoundEffect -->
    <script src="sound-generator.js"></script>

    <script>
      function mutateAndRender(message) {
        var state = mutateState(message);
        console.log(JSON.stringify(state));
        document.getElementById('renderedKeyboard').innerHTML = renderHTML(state);
      }

      listenToMidiMessages(function(midiMessage) {
        var parsedMidiMessage = parseMidiMessage(midiMessage);
        console.log(parsedMidiMessage);
        mutateAndRender(parsedMidiMessage);
      });

      mutateAndRender({}); // just to render
    </script>
  </body>
</html>
